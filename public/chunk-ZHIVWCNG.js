import{a as R}from"./chunk-HXP6K52P.js";import{k as E,l as T,n as J,p as k}from"./chunk-HW2YZ5O7.js";import{Ea as y,Ja as b,K as A,P as w,Ra as g,Ua as i,Va as a,W as h,X as f,Za as x,ab as _,bb as u,fb as r,g as S,gb as m,hb as v,ob as d,pb as p,ua as l,za as I}from"./chunk-AOP3JIL5.js";import"./chunk-X5YLR3NI.js";import{i as C}from"./chunk-ODN5LVDJ.js";var P=class s{constructor(e){this.supabaseService=e;this.supabase=e.getCliente()}supabase;palabras=["ANGULAR","TYPESCRIPT","JAVASCRIPT","HTML","CSS","PROGRAMACION","COMPUTADORA","INTERNET","DESARROLLO","APLICACION","INTERFAZ","USUARIO","BASE","DATOS"];palabraActual="";letrasUsadas=[];intentosRestantes=6;juegoGanado=!1;juegoPerdido=!1;puntajeTotal=0;puntajePartida=0;estadoJuego=new S({palabraOculta:"",letrasUsadas:[],intentosRestantes:6,juegoGanado:!1,juegoPerdido:!1,puntajeTotal:0,puntajePartida:0,palabraActual:""});estadoJuego$=this.estadoJuego.asObservable();ngOnInit(){this.cargarPuntajeTotal(),this.iniciarJuego()}cargarPuntajeTotal(){return C(this,null,function*(){try{let e=yield this.supabaseService.getSession();if(!e?.user)return;let{data:t,error:o}=yield this.supabase.from("resultados_juegos").select("puntaje").eq("usuario_id",e.user.id).eq("juego","ahorcado");if(o)throw o;this.puntajeTotal=t.reduce((n,c)=>n+c.puntaje,0),this.actualizarEstado()}catch(e){console.error("Error al cargar puntaje:",e)}})}iniciarJuego(){this.palabraActual=this.obtenerPalabraAleatoria(),this.letrasUsadas=[],this.intentosRestantes=6,this.juegoGanado=!1,this.juegoPerdido=!1,this.puntajePartida=0,this.actualizarEstado()}obtenerPalabraAleatoria(){let e=Math.floor(Math.random()*this.palabras.length);return this.palabras[e]}actualizarEstado(){let e=this.palabraActual.split("").map(t=>this.letrasUsadas.includes(t)?t:"_").join(" ");this.estadoJuego.next({palabraOculta:e,letrasUsadas:[...this.letrasUsadas],intentosRestantes:this.intentosRestantes,juegoGanado:this.juegoGanado,juegoPerdido:this.juegoPerdido,puntajeTotal:this.puntajeTotal,puntajePartida:this.puntajePartida,palabraActual:this.palabraActual})}intentarLetra(e){this.juegoGanado||this.juegoPerdido||this.letrasUsadas.includes(e)||(this.letrasUsadas.push(e),this.palabraActual.includes(e)?this.puntajePartida+=10:this.intentosRestantes--,this.juegoGanado=this.palabraActual.split("").every(t=>this.letrasUsadas.includes(t)),this.juegoPerdido=this.intentosRestantes===0,this.actualizarEstado(),(this.juegoGanado||this.juegoPerdido)&&this.guardarResultado())}guardarResultado(){return C(this,null,function*(){try{let e=yield this.supabaseService.getSession();if(!e?.user)return;let t=this.juegoGanado?this.puntajePartida:0;this.puntajeTotal+=t,yield this.supabase.from("resultados_juegos").insert([{usuario_id:e.user.id,juego:"ahorcado",puntaje:t,fecha:new Date().toISOString()}]),this.actualizarEstado()}catch(e){console.error("Error al guardar resultado:",e)}})}static \u0275fac=function(t){return new(t||s)(w(R))};static \u0275prov=A({token:s,factory:s.\u0275fac,providedIn:"root"})};function $(s,e){if(s&1){let t=x();i(0,"button",11),d(1,"async"),d(2,"async"),d(3,"async"),_("click",function(){let n=h(t).$implicit,c=u();return f(c.ahorcadoService.intentarLetra(n))}),r(4),a()}if(s&2){let t,o=e.$implicit,n=u();g("disabled",((t=p(1,2,n.estadoJuego$))==null||t.letrasUsadas==null?null:t.letrasUsadas.includes(o))||((t=p(2,4,n.estadoJuego$))==null?null:t.juegoGanado)||((t=p(3,6,n.estadoJuego$))==null?null:t.juegoPerdido)),l(4),v(" ",o," ")}}function B(s,e){if(s&1){let t=x();i(0,"div")(1,"div",12)(2,"h4"),r(3,"\xA1Felicitaciones! Has ganado."),a(),i(4,"p"),r(5),a(),i(6,"button",13),_("click",function(){h(t);let n=u();return f(n.ahorcadoService.iniciarJuego())}),r(7," Jugar de nuevo "),a()()()}if(s&2){let t=u();l(5),v("Has ganado ",t.puntajePartida," puntos")}}function N(s,e){if(s&1){let t=x();i(0,"div")(1,"div",14)(2,"h4"),r(3,"\xA1Game Over! Has perdido."),a(),i(4,"p"),r(5),a(),i(6,"button",15),_("click",function(){h(t);let n=u();return f(n.ahorcadoService.iniciarJuego())}),r(7," Intentar de nuevo "),a()()()}if(s&2){let t=u();l(5),v("La palabra era: ",t.palabraActual,"")}}var z=class s{constructor(e){this.ahorcadoService=e;this.estadoJuego$=this.ahorcadoService.estadoJuego$,this.estadoJuego$.subscribe(t=>{t&&(this.puntajeTotal=t.puntajeTotal,this.puntajePartida=t.puntajePartida,this.palabraActual=t.palabraActual)})}letras="ABCDEFGHIJKLMN\xD1OPQRSTUVWXYZ".split("");estadoJuego$;puntajeTotal=0;puntajePartida=0;palabraActual="";ngOnInit(){this.ahorcadoService.iniciarJuego()}static \u0275fac=function(t){return new(t||s)(I(P))};static \u0275cmp=y({type:s,selectors:[["app-ahorcado"]],decls:35,vars:17,consts:[[1,"container"],[1,"card"],[1,"card-header"],[1,"estadisticas"],[1,"estadistica-item"],[1,"estadistica-valor"],[1,"estadistica-label"],[1,"palabra-oculta"],[1,"teclado"],["class","letra-btn",3,"disabled","click",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"letra-btn",3,"click","disabled"],[1,"mensaje-resultado","alert-success"],[1,"btn-success",3,"click"],[1,"mensaje-resultado","alert-danger"],[1,"btn-danger",3,"click"]],template:function(t,o){if(t&1&&(i(0,"div",0)(1,"div")(2,"div",1)(3,"div",2)(4,"h2"),r(5,"Ahorcado"),a()(),i(6,"div")(7,"div",3)(8,"div",4)(9,"div",5),r(10),d(11,"async"),a(),i(12,"div",6),r(13,"Intentos"),a()(),i(14,"div",4)(15,"div",5),r(16),d(17,"async"),a(),i(18,"div",6),r(19,"Letras Usadas"),a()(),i(20,"div",4)(21,"div",5),r(22),a(),i(23,"div",6),r(24,"Puntaje Total"),a()()(),i(25,"div")(26,"h3",7),r(27),d(28,"async"),a()(),i(29,"div",8),b(30,$,5,8,"button",9),a(),b(31,B,8,1,"div",10),d(32,"async"),b(33,N,8,1,"div",10),d(34,"async"),a()()()()),t&2){let n,c,j,O,M;l(10),m((n=(n=p(11,7,o.estadoJuego$))==null?null:n.intentosRestantes)!==null&&n!==void 0?n:0),l(6),m((c=(c=p(17,9,o.estadoJuego$))==null||c.letrasUsadas==null?null:c.letrasUsadas.length)!==null&&c!==void 0?c:0),l(6),m(o.puntajeTotal),l(5),m((j=p(28,11,o.estadoJuego$))==null?null:j.palabraOculta),l(3),g("ngForOf",o.letras),l(),g("ngIf",(O=p(32,13,o.estadoJuego$))==null?null:O.juegoGanado),l(2),g("ngIf",(M=p(34,15,o.estadoJuego$))==null?null:M.juegoPerdido)}},dependencies:[k,E,T,J],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;min-height:calc(100vh - 100px);display:flex;align-items:center}.card[_ngcontent-%COMP%]{background:var(--paneles);box-shadow:0 4px 20px var(--sombra-sutil);border-radius:12px;padding:24px;border:none}.card-header[_ngcontent-%COMP%]{background:var(--color-primario);color:#fff;border-radius:12px 12px 0 0;padding:16px 0;text-align:center}.titulo-juego[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:600}.estadisticas[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:24px}.estadistica-item[_ngcontent-%COMP%]{text-align:center}.estadistica-valor[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-primario)}.estadistica-label[_ngcontent-%COMP%]{font-size:.9rem;color:var(--texto-principal)}.ahorcado-imagen[_ngcontent-%COMP%]{max-width:180px;margin:0 auto;display:block}.palabra-oculta[_ngcontent-%COMP%]{letter-spacing:.3em;font-size:2rem;color:var(--color-primario);font-weight:600}.teclado[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:center;gap:8px;margin-bottom:16px}.letra-btn[_ngcontent-%COMP%]{background:var(--color-primario);color:#fff;border:none;border-radius:6px;padding:10px 16px;font-size:1.1rem;font-weight:500;cursor:pointer;transition:background .2s}.letra-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#888;cursor:not-allowed}.alert-success[_ngcontent-%COMP%]{background:var(--color-primario);color:#fff;border:none}.alert-danger[_ngcontent-%COMP%]{background:var(--color-secundario);color:#fff;border:none}.btn-success[_ngcontent-%COMP%], .btn-danger[_ngcontent-%COMP%]{background:var(--color-primario);color:#fff;border:none;border-radius:6px;padding:8px 18px;font-size:1rem;margin-top:8px;cursor:pointer;transition:background .2s}.btn-danger[_ngcontent-%COMP%]{background:var(--color-secundario)}.card[_ngcontent-%COMP%]:hover, .letra-btn[_ngcontent-%COMP%]:hover{transform:none!important}.mensaje-resultado[_ngcontent-%COMP%]{padding:25px;border-radius:15px;margin-top:25px;text-align:center;animation:_ngcontent-%COMP%_fadeIn .5s ease;box-shadow:0 6px 12px #0000001a}.mensaje-resultado[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.8rem;margin-bottom:20px;font-weight:700}.mensaje-resultado[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:25px;color:#666}.mensaje-resultado[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 30px;font-size:1.2rem;border-radius:10px;transition:all .3s ease;font-weight:600;text-transform:uppercase;letter-spacing:1px}.mensaje-resultado[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 12px #0003}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-15px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.teclado[_ngcontent-%COMP%]{grid-template-columns:repeat(7,1fr);gap:8px}.estadisticas[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.estadistica-item[_ngcontent-%COMP%]{width:100%}.palabra-oculta[_ngcontent-%COMP%]{font-size:2.2rem;letter-spacing:8px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}}@media (max-width: 480px){.teclado[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr);gap:6px}.letra-btn[_ngcontent-%COMP%]{padding:8px 4px;font-size:1.1rem;min-width:40px;height:40px}.palabra-oculta[_ngcontent-%COMP%]{font-size:1.8rem;letter-spacing:6px}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.estadistica-valor[_ngcontent-%COMP%]{font-size:1.6rem}}"]})};export{z as AhorcadoComponent};
