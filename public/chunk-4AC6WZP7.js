import{a as N}from"./chunk-HXP6K52P.js";import{l as E,n as z,p as B}from"./chunk-HW2YZ5O7.js";import{Ea as $,Ja as v,K as w,P as T,Ra as _,Sa as I,Ua as s,Va as l,W as x,X as b,Za as A,ab as C,bb as g,fb as u,g as P,hb as M,ob as a,pb as i,ua as c,za as k}from"./chunk-AOP3JIL5.js";import"./chunk-X5YLR3NI.js";import{a as S,b as O,i as J}from"./chunk-ODN5LVDJ.js";var j=class r{constructor(n){this.supabaseService=n}MAX_INTENTOS=10;estadoInicial={mazo:[],cartaActual:null,cartaAnterior:null,puntaje:0,intentosRestantes:this.MAX_INTENTOS,juegoTerminado:!1,mensaje:"",historial:[]};estadoJuego=new P(this.estadoInicial);estadoJuego$=this.estadoJuego.asObservable();iniciarJuego(){let n=this.crearMazo();this.mezclarMazo(n);let e=n.pop();this.estadoJuego.next(O(S({},this.estadoInicial),{mazo:n,cartaActual:e,mensaje:`\xBFLa siguiente carta ser\xE1 mayor o menor? (Intentos restantes: ${this.MAX_INTENTOS})`}))}crearMazo(){let n=["\u2660","\u2665","\u2666","\u2663"],e=[];for(let t=1;t<=13;t++)for(let o of n)e.push({valor:t,palo:o,texto:this.obtenerTextoCarta(t,o)});return e}mezclarMazo(n){for(let e=n.length-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[n[e],n[t]]=[n[t],n[e]]}}obtenerTextoCarta(n,e){return`${n===1?"A":n===11?"J":n===12?"Q":n===13?"K":n.toString()}${e}`}adivinar(n){let e=this.estadoJuego.value;if(e.juegoTerminado||e.intentosRestantes<=0)return;let t=e.cartaActual,o=e.mazo.pop(),m=n?o.valor>t.valor:o.valor<t.valor,p=m?e.puntaje+1:e.puntaje,d=e.intentosRestantes-1,f=d<=0,y=[...e.historial,{carta:o.texto,adivinado:m,puntaje:p}],h=m?"\xA1Correcto! \xBFY la siguiente?":"\xA1Incorrecto! \xBFY la siguiente?";f?(h=`\xA1Juego terminado! Puntaje final: ${p}`,this.guardarResultado(p)):h+=` (Intentos restantes: ${d})`,this.estadoJuego.next(O(S({},e),{cartaActual:o,cartaAnterior:t,puntaje:p,intentosRestantes:d,juegoTerminado:f,mensaje:h,historial:y}))}guardarResultado(n){return J(this,null,function*(){try{let e=yield this.supabaseService.getSession();if(!e?.user)return;let{error:t}=yield this.supabaseService.getCliente().from("resultados_juegos").insert([{usuario_id:e.user.id,juego:"Mayor o Menor",puntaje:n,fecha:new Date().toISOString()}]);if(t)throw t}catch(e){console.error("Error al guardar resultado:",e)}})}static \u0275fac=function(e){return new(e||r)(T(N))};static \u0275prov=w({token:r,factory:r.\u0275fac,providedIn:"root"})};function D(r,n){if(r&1&&(s(0,"div",9)(1,"div",10),a(2,"async"),a(3,"async"),u(4),a(5,"async"),l()()),r&2){let e,t,o=g();c(),I("rojo",((e=i(2,3,o.mayorMenorService.estadoJuego$))==null||e.cartaAnterior==null?null:e.cartaAnterior.palo)==="\u2665"||((e=i(3,5,o.mayorMenorService.estadoJuego$))==null||e.cartaAnterior==null?null:e.cartaAnterior.palo)==="\u2666"),c(3),M(" ",(t=i(5,7,o.mayorMenorService.estadoJuego$))==null||t.cartaAnterior==null?null:t.cartaAnterior.texto," ")}}function X(r,n){if(r&1&&(s(0,"div",9)(1,"div",10),a(2,"async"),a(3,"async"),u(4),a(5,"async"),l()()),r&2){let e,t,o=g();c(),I("rojo",((e=i(2,3,o.mayorMenorService.estadoJuego$))==null||e.cartaActual==null?null:e.cartaActual.palo)==="\u2665"||((e=i(3,5,o.mayorMenorService.estadoJuego$))==null||e.cartaActual==null?null:e.cartaActual.palo)==="\u2666"),c(3),M(" ",(t=i(5,7,o.mayorMenorService.estadoJuego$))==null||t.cartaActual==null?null:t.cartaActual.texto," ")}}function F(r,n){if(r&1){let e=A();s(0,"div",11)(1,"button",12),C("click",function(){x(e);let o=g();return b(o.mayorMenorService.adivinar(!0))}),u(2," Mayor "),l(),s(3,"button",13),C("click",function(){x(e);let o=g();return b(o.mayorMenorService.adivinar(!1))}),u(4," Menor "),l()()}}function K(r,n){if(r&1){let e=A();s(0,"div",14)(1,"button",15),C("click",function(){x(e);let o=g();return b(o.mayorMenorService.iniciarJuego())}),u(2," Jugar de nuevo "),l()()}}var V=class r{constructor(n){this.mayorMenorService=n}ngOnInit(){this.mayorMenorService.iniciarJuego()}static \u0275fac=function(e){return new(e||r)(k(j))};static \u0275cmp=$({type:r,selectors:[["app-mayor-o-menor"]],decls:20,vars:18,consts:[[1,"mayor-menor-container"],[1,"mayor-menor-header"],[1,"mayor-menor-content"],[1,"cartas-container"],["class","carta",4,"ngIf"],[1,"mensaje-juego"],[1,"puntaje"],["class","botones-juego",4,"ngIf"],["class","nuevo-juego",4,"ngIf"],[1,"carta"],[1,"carta-texto"],[1,"botones-juego"],[1,"btn-juego","btn-mayor",3,"click"],[1,"btn-juego","btn-menor",3,"click"],[1,"nuevo-juego"],[1,"btn-nuevo-juego",3,"click"]],template:function(e,t){if(e&1&&(s(0,"div",0)(1,"div",1)(2,"h2"),u(3,"Mayor o Menor"),l()(),s(4,"div",2)(5,"div",3),v(6,D,6,9,"div",4),a(7,"async"),v(8,X,6,9,"div",4),a(9,"async"),l(),s(10,"div",5),u(11),a(12,"async"),l(),s(13,"div",6),u(14),a(15,"async"),l(),v(16,F,5,0,"div",7),a(17,"async"),v(18,K,3,0,"div",8),a(19,"async"),l()()),e&2){let o,m,p,d,f,y;c(6),_("ngIf",(o=i(7,6,t.mayorMenorService.estadoJuego$))==null?null:o.cartaAnterior),c(2),_("ngIf",(m=i(9,8,t.mayorMenorService.estadoJuego$))==null?null:m.cartaActual),c(3),M(" ",(p=i(12,10,t.mayorMenorService.estadoJuego$))==null?null:p.mensaje," "),c(3),M(" Puntaje: ",(d=i(15,12,t.mayorMenorService.estadoJuego$))==null?null:d.puntaje," "),c(2),_("ngIf",!((f=i(17,14,t.mayorMenorService.estadoJuego$))!=null&&f.juegoTerminado)),c(2),_("ngIf",(y=i(19,16,t.mayorMenorService.estadoJuego$))==null?null:y.juegoTerminado)}},dependencies:[B,E,z],styles:[".mayor-menor-container[_ngcontent-%COMP%]{max-width:800px;margin:2rem auto;background-color:var(--paneles);box-shadow:0 4px 20px var(--sombra-sutil);border-radius:8px;overflow:hidden}.mayor-menor-header[_ngcontent-%COMP%]{background-color:var(--color-primario);color:#fff;padding:1rem;text-align:center}.mayor-menor-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.mayor-menor-content[_ngcontent-%COMP%]{padding:2rem;display:flex;flex-direction:column;align-items:center;gap:2rem}.cartas-container[_ngcontent-%COMP%]{display:flex;gap:2rem;justify-content:center;align-items:center;min-height:200px}.carta[_ngcontent-%COMP%]{width:100px;height:150px;perspective:1000px;transition:transform .6s;background-color:#fff;border-radius:8px;box-shadow:0 4px 8px #0000001a;display:flex;justify-content:center;align-items:center}.carta[_ngcontent-%COMP%]:hover{transform:translateY(-10px)}.carta-texto[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:700}.carta-texto.rojo[_ngcontent-%COMP%]{color:#f44336}.mensaje-juego[_ngcontent-%COMP%]{font-size:1.2rem;text-align:center;color:var(--texto-principal);font-weight:500}.puntaje[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:var(--color-primario)}.botones-juego[_ngcontent-%COMP%]{display:flex;gap:1rem}.btn-juego[_ngcontent-%COMP%]{padding:1rem 2rem;font-size:1.2rem;border:none;border-radius:8px;cursor:pointer;transition:all .3s ease;font-weight:700}.btn-mayor[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.btn-mayor[_ngcontent-%COMP%]:hover{background-color:#388e3c;transform:translateY(-2px)}.btn-menor[_ngcontent-%COMP%]{background-color:#f44336;color:#fff}.btn-menor[_ngcontent-%COMP%]:hover{background-color:#d32f2f;transform:translateY(-2px)}.btn-nuevo-juego[_ngcontent-%COMP%]{padding:1rem 2rem;background-color:var(--color-primario);color:#fff;border:none;border-radius:8px;font-size:1.2rem;cursor:pointer;transition:all .3s ease}.btn-nuevo-juego[_ngcontent-%COMP%]:hover{background-color:#303f9f;transform:translateY(-2px)}"]})};export{V as MayorOMenorComponent};
