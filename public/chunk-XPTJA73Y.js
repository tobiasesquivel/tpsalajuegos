import{a as I}from"./chunk-HXP6K52P.js";import{k as m,l as y,o as S,p as g}from"./chunk-HW2YZ5O7.js";import{Ea as u,Ja as d,Ra as l,Ua as a,Va as n,Wa as P,ab as h,bb as x,fb as r,gb as c,ob as M,qb as O,ua as i,za as v}from"./chunk-AOP3JIL5.js";import"./chunk-X5YLR3NI.js";import{a as _,b as j,i as C}from"./chunk-ODN5LVDJ.js";function k(t,o){t&1&&(a(0,"div",3),r(1,"Cargando puntajes..."),n())}function z(t,o){if(t&1&&(a(0,"tr")(1,"td"),r(2),n(),a(3,"td"),r(4),n(),a(5,"td"),r(6),n(),a(7,"td"),r(8),M(9,"date"),n()()),t&2){let e=o.$implicit,s=o.index;i(2),c(s+1),i(2),c(e.nombreusuario),i(2),c(e.puntaje),i(2),c(O(9,4,e.fecha,"short"))}}function J(t,o){t&1&&(a(0,"tr")(1,"td",5),r(2,"No hay puntajes para este juego."),n()())}function U(t,o){if(t&1&&(a(0,"table")(1,"thead")(2,"tr")(3,"th"),r(4,"Puesto"),n(),a(5,"th"),r(6,"Usuario"),n(),a(7,"th"),r(8,"Puntaje"),n(),a(9,"th"),r(10,"Fecha"),n()()(),a(11,"tbody"),d(12,z,10,7,"tr",4)(13,J,3,0,"tr",2),n()()),t&2){let e=x();i(12),l("ngForOf",e.puntajes),i(),l("ngIf",e.puntajes.length===0)}}var f=class t{puntajes=[];cargando=!1;static \u0275fac=function(e){return new(e||t)};static \u0275cmp=u({type:t,selectors:[["app-puntajes-tabla"]],inputs:{puntajes:"puntajes",cargando:"cargando"},decls:3,vars:2,consts:[[1,"tabla-puntajes"],["class","cargando",4,"ngIf"],[4,"ngIf"],[1,"cargando"],[4,"ngFor","ngForOf"],["colspan","4"]],template:function(e,s){e&1&&(a(0,"div",0),d(1,k,2,0,"div",1)(2,U,14,2,"table",2),n()),e&2&&(i(),l("ngIf",s.cargando),i(),l("ngIf",!s.cargando))},dependencies:[g,m,y,S],styles:[".tabla-puntajes[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:0 8px}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;background:var(--paneles);border-radius:12px;overflow:hidden;box-shadow:0 4px 20px var(--sombra-sutil)}thead[_ngcontent-%COMP%]{background:var(--color-primario);color:#fff}thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 8px;font-size:1.1rem;font-weight:600;text-align:center}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 8px;font-size:1rem;text-align:center;border-bottom:1px solid #e0e0e0}tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:last-child   td[_ngcontent-%COMP%]{border-bottom:none}.cargando[_ngcontent-%COMP%]{text-align:center;font-size:1.1rem;color:var(--color-primario);padding:16px 0}tr[_ngcontent-%COMP%]:nth-child(2n)   td[_ngcontent-%COMP%]{background:#f7f8fa}tr[_ngcontent-%COMP%]:nth-child(odd)   td[_ngcontent-%COMP%]{background:#fff}tr[_ngcontent-%COMP%]:hover   td[_ngcontent-%COMP%]{background:#e3e8fa}@media (max-width: 600px){table[_ngcontent-%COMP%], thead[_ngcontent-%COMP%], tbody[_ngcontent-%COMP%], th[_ngcontent-%COMP%], td[_ngcontent-%COMP%], tr[_ngcontent-%COMP%]{display:block}thead[_ngcontent-%COMP%]{display:none}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:right;padding-left:50%;position:relative}tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{position:absolute;left:10px;top:10px;white-space:nowrap;font-weight:700;color:var(--color-primario);content:attr(data-label)}}"]})};function W(t,o){if(t&1&&(a(0,"option",5),r(1),n()),t&2){let e=o.$implicit;l("value",e.value),i(),c(e.label)}}var E=class t{constructor(o){this.supabaseService=o}juegos=[{value:"ahorcado",label:"Ahorcado"},{value:"Mayor o Menor",label:"Mayor o Menor"},{value:"Preguntados",label:"Preguntados"},{value:"Wordle",label:"Wordle"}];juegoSeleccionado=this.juegos[0].value;puntajes=[];cargando=!1;ngOnInit(){this.cargarPuntajes()}cargarPuntajes(){return C(this,null,function*(){this.cargando=!0;let{data:o,error:e}=yield this.supabaseService.getCliente().from("resultados_juegos").select("puntaje, fecha, usuario_id").eq("juego",this.juegoSeleccionado).order("puntaje",{ascending:!1}).limit(10),{data:s,error:T}=yield this.supabaseService.getCliente().from("usuarios").select("id, nombreusuario");this.puntajes=(o||[]).map(p=>{let b=(s||[]).find(w=>w.id===p.usuario_id);return j(_({},p),{nombreusuario:b?b.nombreusuario:p.usuario_id})}),this.cargando=!1})}onJuegoChange(o){this.juegoSeleccionado=o.target.value,this.cargarPuntajes()}static \u0275fac=function(e){return new(e||t)(v(I))};static \u0275cmp=u({type:t,selectors:[["app-puntajes"]],decls:7,vars:4,consts:[[1,"contenedor","panel"],[1,"seccion-select"],["name","juegos","id","juegos",1,"select-juegos",3,"change","value"],[3,"value",4,"ngFor","ngForOf"],[3,"puntajes","cargando"],[3,"value"]],template:function(e,s){e&1&&(a(0,"div",0)(1,"div",1)(2,"p"),r(3,"Seleccione su juego"),n(),a(4,"select",2),h("change",function(p){return s.onJuegoChange(p)}),d(5,W,2,2,"option",3),n()(),P(6,"app-puntajes-tabla",4),n()),e&2&&(i(4),l("value",s.juegoSeleccionado),i(),l("ngForOf",s.juegos),i(),l("puntajes",s.puntajes)("cargando",s.cargando))},dependencies:[f,g,m],styles:[".seccion-select[_ngcontent-%COMP%]{text-align:center;font-size:1.3rem;margin-bottom:3rem;color:var(--)}.contenedor[_ngcontent-%COMP%]{padding:1.3rem 3rem 3rem;margin-top:4rem}.select-juegos[_ngcontent-%COMP%]{width:100%;max-width:200px;padding:2px;color:var(--texto-principal)}"]})};export{E as PuntajesComponent};
