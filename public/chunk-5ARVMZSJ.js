import{a as V}from"./chunk-HXP6K52P.js";import{k as L,l as D,n as N,p as R}from"./chunk-HW2YZ5O7.js";import{Ea as W,Ja as m,K as M,P,Ra as g,Sa as B,Ta as $,Ua as c,Va as l,W as S,X as w,Xa as I,Ya as E,Za as O,ab as C,bb as f,fb as _,g as T,gb as F,hb as x,ob as d,pb as p,ta as k,ua as a,za as J}from"./chunk-AOP3JIL5.js";import"./chunk-X5YLR3NI.js";import{a as v,b,i as j}from"./chunk-ODN5LVDJ.js";var h=class o{constructor(e){this.supabaseService=e}palabras=["LINUX","REDES","CLOUD","BYTES","CHIPS","ROBOT","VIRUS","DATOS","CODES","WIFI","EMAIL","LOGIN","HOSTS","ROUTER","CACHE","DEBUG","FILES","PIXEL","SCANNER","SITES","TOKEN","USERS","VOICE","WIDGET","YIELD"];estadoInicial={intentos:Array(6).fill(Array(5).fill("")),estadoIntentos:Array(6).fill(Array(5).fill("")),intentoActual:0,palabraSecreta:"",juegoTerminado:!1,victoria:!1,puntaje:0};estadoJuego=new T(this.estadoInicial);estadoJuego$=this.estadoJuego.asObservable();iniciarJuego(){let e=this.palabras[Math.floor(Math.random()*this.palabras.length)];this.estadoJuego.next(b(v({},this.estadoInicial),{palabraSecreta:e}))}agregarLetra(e){let t=this.estadoJuego.value;if(t.juegoTerminado||t.intentoActual>=6)return;let n=[...t.intentos],i=[...n[t.intentoActual]],r=i.findIndex(u=>u==="");r!==-1&&(i[r]=e,n[t.intentoActual]=i,this.estadoJuego.next(b(v({},t),{intentos:n})))}eliminarLetra(){let e=this.estadoJuego.value;if(e.juegoTerminado||e.intentoActual>=6)return;let t=[...e.intentos],n=[...t[e.intentoActual]],i=n.findIndex(r=>r==="");i===-1?n[4]="":i>0&&(n[i-1]=""),t[e.intentoActual]=n,this.estadoJuego.next(b(v({},e),{intentos:t}))}verificarIntento(){let e=this.estadoJuego.value;if(e.juegoTerminado||e.intentoActual>=6)return;let t=e.intentos[e.intentoActual];if(t.some(s=>s===""))return;let n=t.join(""),i=[...e.estadoIntentos],r=new Array(5).fill("");for(let s=0;s<5;s++)n[s]===e.palabraSecreta[s]?r[s]="correcto":e.palabraSecreta.includes(n[s])?r[s]="presente":r[s]="ausente";i[e.intentoActual]=r;let u=n===e.palabraSecreta,y=u||e.intentoActual===5,A=u?(6-e.intentoActual)*100:0;y&&this.guardarResultado(A),this.estadoJuego.next(b(v({},e),{estadoIntentos:i,intentoActual:e.intentoActual+1,juegoTerminado:y,victoria:u,puntaje:A}))}guardarResultado(e){return j(this,null,function*(){try{let t=yield this.supabaseService.getSession();if(!t?.user)return;let{error:n}=yield this.supabaseService.getCliente().from("resultados_juegos").insert([{usuario_id:t.user.id,juego:"Wordle",puntaje:e,fecha:new Date().toISOString()}]);if(n)throw n}catch(t){console.error("Error al guardar resultado:",t)}})}static \u0275fac=function(t){return new(t||o)(P(V))};static \u0275prov=M({token:o,factory:o.\u0275fac,providedIn:"root"})};function G(o,e){if(o&1&&(I(0),c(1,"div",9),d(2,"async"),_(3),l(),E()),o&2){let t,n=e.$implicit,i=e.index,r=f().index,u=f();a(),$(u.obtenerClaseEstado(((t=p(2,3,u.estadoJuego$))==null||t.estadoIntentos==null||t.estadoIntentos[r]==null?null:t.estadoIntentos[r][i])||"vacio")),a(2),x(" ",n," ")}}function K(o,e){if(o&1&&(I(0),c(1,"div",8),m(2,G,4,5,"ng-container",4),l(),E()),o&2){let t=e.$implicit;a(2),g("ngForOf",t)}}function X(o,e){if(o&1){let t=O();c(0,"button",12),C("click",function(){let i=S(t).$implicit,r=f(2);return w(r.presionarTecla(i))}),_(1),l()}if(o&2){let t=e.$implicit;B("tecla-especial",t==="ENTER"||t==="\u232B"),a(),x(" ",t," ")}}function Y(o,e){if(o&1&&(c(0,"div",10),m(1,X,2,3,"button",11),l()),o&2){let t=e.$implicit;a(),g("ngForOf",t)}}function Z(o,e){if(o&1&&(c(0,"p"),_(1),d(2,"async"),l()),o&2){let t,n=f(2);a(),x(" Puntaje: ",(t=p(2,1,n.estadoJuego$))==null?null:t.puntaje," ")}}function Q(o,e){if(o&1&&(c(0,"p"),_(1),d(2,"async"),l()),o&2){let t,n=f(2);a(),x(" La palabra era: ",(t=p(2,1,n.estadoJuego$))==null?null:t.palabraSecreta," ")}}function q(o,e){if(o&1){let t=O();c(0,"div",13)(1,"h4"),_(2),d(3,"async"),l(),m(4,Z,3,3,"p",14),d(5,"async"),m(6,Q,3,3,"p",14),d(7,"async"),c(8,"button",15),C("click",function(){S(t);let i=f();return w(i.wordleService.iniciarJuego())}),_(9," Jugar de nuevo "),l()()}if(o&2){let t,n,i,r=f();a(2),F((t=p(3,3,r.estadoJuego$))!=null&&t.victoria?"\xA1Felicitaciones!":"\xA1Int\xE9ntalo de nuevo!"),a(2),g("ngIf",(n=p(5,5,r.estadoJuego$))==null?null:n.victoria),a(2),g("ngIf",!((i=p(7,7,r.estadoJuego$))!=null&&i.victoria))}}var z=class o{constructor(e){this.wordleService=e;this.estadoJuego$=this.wordleService.estadoJuego$}estadoJuego$;teclado=[["Q","W","E","R","T","Y","U","I","O","P"],["A","S","D","F","G","H","J","K","L","\xD1"],["ENTER","Z","X","C","V","B","N","M","\u232B"]];ngOnInit(){this.wordleService.iniciarJuego()}manejarTeclado(e){e.key==="Enter"?this.wordleService.verificarIntento():e.key==="Backspace"?this.wordleService.eliminarLetra():/^[a-zA-ZñÑ]$/.test(e.key)&&this.wordleService.agregarLetra(e.key.toUpperCase())}presionarTecla(e){e==="ENTER"?this.wordleService.verificarIntento():e==="\u232B"?this.wordleService.eliminarLetra():this.wordleService.agregarLetra(e)}obtenerClaseEstado(e){switch(e){case"correcto":return"correcto";case"presente":return"presente";case"ausente":return"ausente";default:return""}}static \u0275fac=function(t){return new(t||o)(J(h))};static \u0275cmp=W({type:o,selectors:[["app-wordle"]],hostBindings:function(t,n){t&1&&C("keydown",function(r){return n.manejarTeclado(r)},!1,k)},decls:12,vars:7,consts:[[1,"wordle-container"],[1,"wordle-header"],[1,"wordle-content"],[1,"tablero"],[4,"ngFor","ngForOf"],[1,"teclado"],["class","fila-teclado",4,"ngFor","ngForOf"],["class","mensaje-resultado",4,"ngIf"],[1,"fila"],[1,"casilla"],[1,"fila-teclado"],["class","tecla",3,"tecla-especial","click",4,"ngFor","ngForOf"],[1,"tecla",3,"click"],[1,"mensaje-resultado"],[4,"ngIf"],[1,"btn-nuevo-juego",3,"click"]],template:function(t,n){if(t&1&&(c(0,"div",0)(1,"div",1)(2,"h2"),_(3,"Wordle - Tecnolog\xEDa"),l()(),c(4,"div",2)(5,"div",3),m(6,K,3,1,"ng-container",4),d(7,"async"),l(),c(8,"div",5),m(9,Y,2,1,"div",6),l(),m(10,q,10,9,"div",7),d(11,"async"),l()()),t&2){let i,r;a(6),g("ngForOf",(i=p(7,3,n.estadoJuego$))==null?null:i.intentos),a(3),g("ngForOf",n.teclado),a(),g("ngIf",(r=p(11,5,n.estadoJuego$))==null?null:r.juegoTerminado)}},dependencies:[R,L,D,N],styles:[".wordle-container[_ngcontent-%COMP%]{max-width:500px;margin:2rem auto;background-color:var(--paneles);box-shadow:0 4px 20px var(--sombra-sutil);border-radius:8px;overflow:hidden}.wordle-header[_ngcontent-%COMP%]{background-color:var(--color-primario);color:#fff;padding:1rem;text-align:center}.wordle-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.wordle-content[_ngcontent-%COMP%]{padding:1.5rem}.tablero[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-bottom:2rem}.fila[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.casilla[_ngcontent-%COMP%]{width:50px;height:50px;border:2px solid #ccc;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;text-transform:uppercase}.casilla.correcto[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border-color:#4caf50}.casilla.presente[_ngcontent-%COMP%]{background-color:#ffc107;color:#fff;border-color:#ffc107}.casilla.ausente[_ngcontent-%COMP%]{background-color:#9e9e9e;color:#fff;border-color:#9e9e9e}.teclado[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;margin-top:2rem}.fila-teclado[_ngcontent-%COMP%]{display:flex;gap:.5rem;justify-content:center}.tecla[_ngcontent-%COMP%]{min-width:40px;height:50px;border:none;background-color:#e0e0e0;border-radius:4px;font-size:1rem;font-weight:700;cursor:pointer;transition:background-color .2s}.tecla[_ngcontent-%COMP%]:hover{background-color:#d0d0d0}.tecla-especial[_ngcontent-%COMP%]{min-width:80px;background-color:var(--color-secundario);color:#fff}.tecla-especial[_ngcontent-%COMP%]:hover{background-color:#f4511e}.mensaje-resultado[_ngcontent-%COMP%]{text-align:center;margin-top:2rem;padding:1rem;background-color:#f5f5f5;border-radius:4px}.mensaje-resultado[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin-bottom:1rem;color:var(--color-primario)}.btn-nuevo-juego[_ngcontent-%COMP%]{margin-top:1rem;padding:.5rem 1rem;background-color:var(--color-primario);color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:1rem;transition:background-color .2s}.btn-nuevo-juego[_ngcontent-%COMP%]:hover{background-color:#303f9f}@media (max-width: 576px){.casilla[_ngcontent-%COMP%]{width:2.5rem;height:2.5rem;font-size:1.2rem}.tecla[_ngcontent-%COMP%]{min-width:2rem;height:2.5rem;font-size:.9rem}.tecla-especial[_ngcontent-%COMP%]{min-width:3rem}}"]})};export{z as WordleComponent};
