import{a as w}from"./chunk-X3LAWSPP.js";import{a as k,b as s,c as D,d as v,e as U,f as C,h as j,k as M,m as G,t as _}from"./chunk-C3KL25CK.js";import{a as R}from"./chunk-L5GLGSRE.js";import{d as I,e as S}from"./chunk-GLJWXLRS.js";import"./chunk-QTCHNE4Q.js";import"./chunk-HXP6K52P.js";import{l as f,p as b}from"./chunk-HW2YZ5O7.js";import{Ea as p,Ja as d,Ra as a,Sa as E,Ua as i,Va as m,Wa as u,ab as F,bb as g,fb as l,gb as N,hb as O,ua as n,za as x}from"./chunk-AOP3JIL5.js";import"./chunk-X5YLR3NI.js";import{i as P}from"./chunk-ODN5LVDJ.js";function L(t,o){if(t&1&&(i(0,"span",4),l(1),m()),t&2){let r=g();n(),N(r.errorMessage)}}var y=class t{formulario;controlName="";label="";placeHolder="";type="";errorMessage="";static \u0275fac=function(r){return new(r||t)};static \u0275cmp=p({type:t,selectors:[["app-form-input"]],inputs:{formulario:"formulario",controlName:"controlName",label:"label",placeHolder:"placeHolder",type:"type",errorMessage:"errorMessage"},decls:5,vars:11,consts:[[1,"seccion-input",3,"formGroup"],[3,"for"],[1,"input-texto",3,"placeholder","formControlName","type","name","id"],["class","error-message",4,"ngIf"],[1,"error-message"]],template:function(r,e){if(r&1&&(i(0,"div",0)(1,"label",1),l(2),m(),u(3,"input",2),d(4,L,2,1,"span",3),m()),r&2){let c;a("formGroup",e.formulario),n(),a("for",e.controlName),n(),N(e.label),n(),E("error",((c=e.formulario.get(e.controlName))==null?null:c.invalid)&&((c=e.formulario.get(e.controlName))==null?null:c.touched)),a("placeholder",e.placeHolder)("formControlName",e.controlName)("type",e.type)("name",e.controlName)("id",e.controlName),n(),a("ngIf",e.errorMessage)}},dependencies:[_,k,D,v,M,G,b,f],styles:['.form[_ngcontent-%COMP%]{display:flex;padding:5%;flex-direction:column}.titulo[_ngcontent-%COMP%]{color:var(--color-primario);text-align:center;font-size:2.8rem}.titulo[_ngcontent-%COMP%]:after{border:1px solid var(--color-secundario);content:"";display:block;width:80%;margin:.2rem auto 2rem}.seccion-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.input-texto[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid rgba(0,0,0,.231);border-radius:6px}.input-texto.error[_ngcontent-%COMP%]{border-color:#f44336}.error-message[_ngcontent-%COMP%]{color:#f44336;font-size:.8rem;margin-top:.25rem}.error-mensaje[_ngcontent-%COMP%]{background-color:#ffebee;color:#f44336;padding:1rem;border-radius:6px;margin-bottom:1rem;text-align:center}.btn-enviar[_ngcontent-%COMP%]{border:none;font-size:inherit;color:var(--fondo);background-color:var(--color-primario);padding:.5rem;border-radius:10px}.btn-enviar[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.texto-cuenta[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:none}']})};function V(t,o){if(t&1&&(i(0,"div",10),l(1),m()),t&2){let r=g();n(),O(" ",r.mensajeError," ")}}var h=class t{constructor(o,r){this.router=o;this.servicioUsuario=r}formulario;mensajeError="";cargando=!1;ngOnInit(){this.formulario=new U({correoElectronico:new C("",[s.required,s.email]),nombreUsuario:new C("",[s.required,s.minLength(3),s.pattern(/^[a-zA-Z0-9_]+$/)]),clave:new C("",[s.required,s.minLength(6),s.pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{6,}$/)])})}onSubmit(){return P(this,null,function*(){if(this.formulario.valid){this.cargando=!0,this.mensajeError="";let{error:o}=yield this.servicioUsuario.registrar(this.getCorreoElectronico(),this.getNombreUsuario(),this.getClave());o&&(this.mensajeError=o.message||"Error al registrar usuario",this.cargando=!1)}})}getError(o){let r=this.formulario.get(o);if(r&&r.errors&&r.touched){if(r.errors.required)return"Este campo es requerido";if(r.errors.email)return"Ingrese un correo electr\xF3nico v\xE1lido";if(r.errors.minlength)return`M\xEDnimo ${r.errors.minlength.requiredLength} caracteres`;if(r.errors.pattern){if(o==="nombreUsuario")return"Solo letras, n\xFAmeros y guiones bajos permitidos";if(o==="clave")return"Debe contener al menos una may\xFAscula, una min\xFAscula y un n\xFAmero"}}return""}irAHome(){this.router.navigate(["/home"])}getCorreoElectronico(){return this.formulario.get("correoElectronico")?.value}getNombreUsuario(){return this.formulario.get("nombreUsuario")?.value}getClave(){return this.formulario.get("clave")?.value}crearAdmin(){let o=this.servicioUsuario.registrar("tobias15esquivel@gmail.com","tobias","Clave123456");console.log(o)}static \u0275fac=function(r){return new(r||t)(x(I),x(R))};static \u0275cmp=p({type:t,selectors:[["app-registro-form"]],decls:15,vars:10,consts:[[1,"form",3,"ngSubmit","formGroup"],[1,"titulo"],[3,"click"],["class","error-mensaje",4,"ngIf"],["label","Correo electr\xF3nico","placeHolder","Correo electr\xF3nico","controlName","correoElectronico","type","email",3,"formulario","errorMessage"],["label","Nombre de usuario","placeHolder","Nombre de usuario","controlName","nombreUsuario","type","text",3,"formulario","errorMessage"],["label","Contrase\xF1a","placeHolder","Contrase\xF1a","controlName","clave","type","password",3,"formulario","errorMessage"],[1,"texto-cuenta"],["routerLink","/login"],["type","submit",1,"btn-enviar",3,"disabled"],[1,"error-mensaje"]],template:function(r,e){r&1&&(i(0,"form",0),F("ngSubmit",function(){return e.onSubmit()}),i(1,"h2",1),l(2,"Registrate"),m(),i(3,"button",2),F("click",function(){return e.crearAdmin()}),l(4,"Crear Admin"),m(),d(5,V,2,1,"div",3),u(6,"app-form-input",4)(7,"app-form-input",5)(8,"app-form-input",6),i(9,"p",7),l(10,"\xBFYa ten\xE9s una cuenta? "),i(11,"a",8),l(12,"ingresa"),m()(),i(13,"button",9),l(14),m()()),r&2&&(a("formGroup",e.formulario),n(5),a("ngIf",e.mensajeError),n(),a("formulario",e.formulario)("errorMessage",e.getError("correoElectronico")),n(),a("formulario",e.formulario)("errorMessage",e.getError("nombreUsuario")),n(),a("formulario",e.formulario)("errorMessage",e.getError("clave")),n(5),a("disabled",e.formulario.invalid||e.cargando),n(),O(" ",e.cargando?"Registrando...":"Registrarse"," "))},dependencies:[_,j,v,M,S,y,b,f],styles:['.form[_ngcontent-%COMP%]{display:flex;padding:5%;flex-direction:column}.titulo[_ngcontent-%COMP%]{color:var(--color-primario);text-align:center;font-size:2.8rem}.titulo[_ngcontent-%COMP%]:after{border:1px solid var(--color-secundario);content:"";display:block;width:80%;margin:.2rem auto 2rem}.seccion-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.input-texto[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid rgba(0,0,0,.231);border-radius:6px}.input-texto.error[_ngcontent-%COMP%]{border-color:#f44336}.error-message[_ngcontent-%COMP%]{color:#f44336;font-size:.8rem;margin-top:.25rem}.error-mensaje[_ngcontent-%COMP%]{background-color:#ffebee;color:#f44336;padding:1rem;border-radius:6px;margin-bottom:1rem;text-align:center}.btn-enviar[_ngcontent-%COMP%]{border:none;font-size:inherit;color:var(--fondo);background-color:var(--color-primario);padding:.5rem;border-radius:10px}.btn-enviar[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.texto-cuenta[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:none}']})};var H=class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=p({type:t,selectors:[["app-registro"]],decls:2,vars:0,consts:[["maxWidth","500px"]],template:function(r,e){r&1&&(i(0,"app-vista-form",0),u(1,"app-registro-form"),m())},dependencies:[w,h],encapsulation:2})};export{H as RegistroComponent};
