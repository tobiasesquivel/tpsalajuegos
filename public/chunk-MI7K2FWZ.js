import{a as L,c as B}from"./chunk-QTCHNE4Q.js";import{a as N}from"./chunk-HXP6K52P.js";import{k as z,l as J,n as H,p as R}from"./chunk-HW2YZ5O7.js";import{Ea as j,Ja as g,K as O,P,Ra as m,Ua as s,Va as r,W as _,X as x,Xa as E,Ya as k,Za as h,ab as b,bb as u,eb as A,fb as p,g as S,gb as y,hb as v,ob as c,pb as d,ra as I,rb as T,ua as l,za as w}from"./chunk-AOP3JIL5.js";import"./chunk-X5YLR3NI.js";import{i as f}from"./chunk-ODN5LVDJ.js";var C=class n{constructor(e,t){this.supabaseService=e;this.http=t;this.cargarPreguntas()}GIPHY_API_KEY="GlVGYHkr3WSBnllca54iNt0yFbjz7L65";GIPHY_API_URL="https://api.giphy.com/v1/gifs/search";preguntasBase=[{pregunta:"\xBFCu\xE1l es el nombre completo de Homer Simpson?",opciones:["Homer Jay Simpson","Homer Abraham Simpson","Homer John Simpson","Homer James Simpson"],respuestaCorrecta:"Homer Jay Simpson",busquedaImagen:"homer simpson"},{pregunta:"\xBFEn qu\xE9 planta de energ\xEDa nuclear trabaja Homer?",opciones:["Planta Nuclear de Springfield","Central Nuclear de Shelbyville","Planta de Energ\xEDa de Springfield","Central El\xE9ctrica de Springfield"],respuestaCorrecta:"Planta Nuclear de Springfield",busquedaImagen:"springfield nuclear power plant"},{pregunta:"\xBFCu\xE1l es el nombre de la hermana de Lisa?",opciones:["Maggie","Patty","Selma","Marge"],respuestaCorrecta:"Maggie",busquedaImagen:"maggie simpson"},{pregunta:"\xBFQui\xE9n es el due\xF1o de la Taberna de Moe?",opciones:["Moe Szyslak","Barney Gumble","Lenny Leonard","Carl Carlson"],respuestaCorrecta:"Moe Szyslak",busquedaImagen:"moe's tavern"},{pregunta:"\xBFCu\xE1l es el nombre del perro de la familia Simpson?",opciones:["Ayudante de Santa","Bola de Nieve","Laddie","Santa's Little Helper"],respuestaCorrecta:"Ayudante de Santa",busquedaImagen:"santas little helper simpsons"},{pregunta:"\xBFEn qu\xE9 escuela estudian Bart y Lisa?",opciones:["Escuela Primaria de Springfield","Colegio de Springfield","Instituto de Springfield","Academia de Springfield"],respuestaCorrecta:"Escuela Primaria de Springfield",busquedaImagen:"springfield elementary school"},{pregunta:"\xBFCu\xE1l es el nombre del director de la Escuela Primaria de Springfield?",opciones:["Seymour Skinner","Superintendente Chalmers","Ned Flanders","Reverendo Lovejoy"],respuestaCorrecta:"Seymour Skinner",busquedaImagen:"principal skinner simpsons"},{pregunta:"\xBFCu\xE1l es el nombre del bar de Moe?",opciones:["La Taberna de Moe","El Bar de Moe","La Cantina de Moe","El Pub de Moe"],respuestaCorrecta:"La Taberna de Moe",busquedaImagen:"moes tavern simpsons"},{pregunta:"\xBFCu\xE1l es el nombre del vecino de los Simpson?",opciones:["Ned Flanders","Reverendo Lovejoy","Dr. Hibbert","Apu Nahasapeemapetilon"],respuestaCorrecta:"Ned Flanders",busquedaImagen:"ned flanders simpsons"},{pregunta:"\xBFCu\xE1l es el nombre del due\xF1o de la tienda de conveniencia Kwik-E-Mart?",opciones:["Apu Nahasapeemapetilon","Moe Szyslak","Barney Gumble","Lenny Leonard"],respuestaCorrecta:"Apu Nahasapeemapetilon",busquedaImagen:"apu kwik e mart"}];preguntas=[];preguntaActual=null;puntaje=0;intentosRestantes=3;juegoTerminado=!1;estadoJuego=new S({preguntaActual:null,puntaje:0,intentosRestantes:3,juegoTerminado:!1});estadoJuego$=this.estadoJuego.asObservable();cargarPreguntas(){return f(this,null,function*(){try{this.preguntas=yield Promise.all(this.preguntasBase.map(e=>f(this,null,function*(){let t=yield this.obtenerImagenGiphy(e.busquedaImagen);return{pregunta:e.pregunta,opciones:e.opciones,respuestaCorrecta:e.respuestaCorrecta,imagen:t}}))),this.iniciarJuego()}catch(e){console.error("Error al cargar preguntas:",e)}})}obtenerImagenGiphy(e){return f(this,null,function*(){try{let a=yield this.http.get(`${this.GIPHY_API_URL}?api_key=${this.GIPHY_API_KEY}&q=${e}&limit=1&rating=g`).toPromise();if(a.data&&a.data.length>0)return a.data[0].images.original.url}catch(t){console.error("Error al obtener imagen de Giphy:",t)}return"https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif"})}iniciarJuego(){this.puntaje=0,this.intentosRestantes=3,this.juegoTerminado=!1,this.siguientePregunta()}siguientePregunta(){if(this.preguntas.length>0){let e=Math.floor(Math.random()*this.preguntas.length);this.preguntaActual=this.preguntas[e],this.preguntas.splice(e,1)}else this.juegoTerminado=!0,this.guardarResultado();this.actualizarEstado()}verificarRespuesta(e){!this.preguntaActual||this.juegoTerminado||(e===this.preguntaActual.respuestaCorrecta?this.puntaje+=10:(this.intentosRestantes--,this.intentosRestantes<=0&&(this.juegoTerminado=!0,this.guardarResultado())),this.siguientePregunta())}guardarResultado(){return f(this,null,function*(){try{let e=yield this.supabaseService.getSession();if(!e?.user)return;yield this.supabaseService.getCliente().from("resultados_juegos").insert([{usuario_id:e.user.id,juego:"Preguntados",puntaje:this.puntaje}])}catch(e){console.error("Error al guardar resultado:",e)}})}actualizarEstado(){this.estadoJuego.next({preguntaActual:this.preguntaActual,puntaje:this.puntaje,intentosRestantes:this.intentosRestantes,juegoTerminado:this.juegoTerminado})}static \u0275fac=function(t){return new(t||n)(P(N),P(L))};static \u0275prov=O({token:n,factory:n.\u0275fac,providedIn:"root"})};function Y(n,e){if(n&1){let t=h();E(0),s(1,"div",11)(2,"h4"),p(3,"\xA1Juego Terminado!"),r(),s(4,"p"),p(5),c(6,"async"),r(),s(7,"button",12),b("click",function(){_(t);let i=u();return x(i.preguntadosService.iniciarJuego())}),p(8," Jugar de nuevo "),r()(),k()}if(n&2){let t,a=u();l(5),v("Tu puntaje final es: ",(t=d(6,1,a.estadoJuego$))==null?null:t.puntaje,"")}}function F(n,e){n&1&&(s(0,"div",21)(1,"div",22)(2,"span",23),p(3,"Cargando..."),r()()())}function K(n,e){if(n&1){let t=h();s(0,"button",24),b("click",function(){let i=_(t).$implicit,o=u(3);return x(o.seleccionarRespuesta(i))}),p(1),r()}if(n&2){let t=e.$implicit;l(),v(" ",t," ")}}function D(n,e){if(n&1){let t=h();s(0,"div",14)(1,"div",15)(2,"img",16),c(3,"async"),b("error",function(i){_(t);let o=u(2);return x(o.onImageError(i))})("load",function(){_(t);let i=u(2);return x(i.onImageLoad())}),r(),g(4,F,4,0,"div",17),r(),s(5,"div",18),p(6),c(7,"async"),r(),s(8,"div",19),g(9,K,2,1,"button",20),c(10,"async"),r()()}if(n&2){let t,a,i,o=u(2);l(2),m("src",(t=d(3,4,o.estadoJuego$))==null||t.preguntaActual==null?null:t.preguntaActual.imagen,I),l(2),m("ngIf",!o.imagenCargada),l(2),v(" ",(a=d(7,6,o.estadoJuego$))==null||a.preguntaActual==null?null:a.preguntaActual.pregunta," "),l(3),m("ngForOf",(i=d(10,8,o.estadoJuego$))==null||i.preguntaActual==null?null:i.preguntaActual.opciones)}}function U(n,e){if(n&1&&(g(0,D,11,10,"div",13),c(1,"async")),n&2){let t,a=u();m("ngIf",(t=d(1,1,a.estadoJuego$))==null?null:t.preguntaActual)}}var $=class n{constructor(e){this.preguntadosService=e;this.estadoJuego$=this.preguntadosService.estadoJuego$}estadoJuego$;imagenCargada=!1;ngOnInit(){this.preguntadosService.iniciarJuego()}seleccionarRespuesta(e){this.preguntadosService.verificarRespuesta(e)}onImageError(e){let t=e.target;t.src="https://media.giphy.com/media/3o7abKhOpu0NwenH3O/giphy.gif",this.imagenCargada=!0}onImageLoad(){this.imagenCargada=!0}static \u0275fac=function(t){return new(t||n)(w(C))};static \u0275cmp=j({type:n,selectors:[["app-preguntados"]],decls:23,vars:10,consts:[["juegoActivo",""],[1,"preguntados-panel"],[1,"card"],[1,"card-header"],[1,"titulo-juego"],[1,"card-body"],[1,"estadisticas"],[1,"estadistica-item"],[1,"estadistica-valor"],[1,"estadistica-label"],[4,"ngIf","ngIfElse"],[1,"mensaje-resultado","resultado"],[1,"btn","btn-success","mt-2",3,"click"],["class","pregunta-container",4,"ngIf"],[1,"pregunta-container"],[1,"imagen-container",2,"text-align","center","margin-bottom","16px"],["alt","Imagen de la pregunta","loading","lazy",1,"pregunta-imagen",2,"max-width","180px","border-radius","8px","box-shadow","0 2px 8px var(--sombra-sutil)",3,"error","load","src"],["class","imagen-loading",4,"ngIf"],[1,"pregunta"],[1,"opciones"],["class","opcion-btn",3,"click",4,"ngFor","ngForOf"],[1,"imagen-loading"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"opcion-btn",3,"click"]],template:function(t,a){if(t&1&&(s(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),p(4,"Preguntados - Los Simpsons"),r()(),s(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8),p(9),c(10,"async"),r(),s(11,"div",9),p(12,"Puntaje"),r()(),s(13,"div",7)(14,"div",8),p(15),c(16,"async"),r(),s(17,"div",9),p(18,"Intentos"),r()()(),g(19,Y,9,3,"ng-container",10),c(20,"async"),g(21,U,2,3,"ng-template",null,0,T),r()()()),t&2){let i,o,M,q=A(22);l(9),y((i=(i=d(10,4,a.estadoJuego$))==null?null:i.puntaje)!==null&&i!==void 0?i:0),l(6),y((o=(o=d(16,6,a.estadoJuego$))==null?null:o.intentosRestantes)!==null&&o!==void 0?o:0),l(4),m("ngIf",(M=d(20,8,a.estadoJuego$))==null?null:M.juegoTerminado)("ngIfElse",q)}},dependencies:[R,z,J,H,B],styles:[".container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto;padding:20px;min-height:calc(100vh - 100px);display:flex;align-items:center}.card[_ngcontent-%COMP%]{background:var(--paneles);box-shadow:0 4px 20px var(--sombra-sutil);border-radius:12px;padding:24px;border:none}.card-header[_ngcontent-%COMP%]{background:var(--color-primario);color:#fff;border-radius:12px 12px 0 0;padding:16px 0;text-align:center}.titulo-juego[_ngcontent-%COMP%]{margin:0;font-size:2rem;font-weight:600}.pregunta[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:500;color:var(--color-primario);margin-bottom:18px}.opciones[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.opcion-btn[_ngcontent-%COMP%]{background:var(--color-primario);color:#fff;border:none;border-radius:6px;padding:10px 16px;font-size:1.1rem;font-weight:500;cursor:pointer;transition:background .2s}.opcion-btn[_ngcontent-%COMP%]:disabled{background:#ccc;color:#888;cursor:not-allowed}.resultado[_ngcontent-%COMP%]{margin-top:20px;font-size:1.1rem;font-weight:600;color:var(--color-secundario)}.card[_ngcontent-%COMP%]:hover, .opcion-btn[_ngcontent-%COMP%]:hover{transform:none!important}.estadisticas[_ngcontent-%COMP%]{display:flex;justify-content:space-around;margin-bottom:2rem;padding:1rem;background-color:var(--fondo);border-radius:8px}.estadistica-item[_ngcontent-%COMP%]{text-align:center}.estadistica-valor[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:var(--color-primario)}.estadistica-label[_ngcontent-%COMP%]{font-size:1rem;color:var(--texto-principal)}.pregunta-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:25px}.imagen-container[_ngcontent-%COMP%]{width:100%;height:300px;overflow:hidden;border-radius:15px;box-shadow:0 4px 8px #0000001a}.pregunta-imagen[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;transition:transform .3s ease}.pregunta-imagen[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.pregunta-texto[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#2c3e50;text-align:center;padding:20px;background:#fff;border-radius:12px;box-shadow:0 4px 6px #0000000d;line-height:1.4}.opciones-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-top:20px}.btn-opcion[_ngcontent-%COMP%]{padding:15px 20px;font-size:1.1rem;font-weight:600;border:2px solid #4a90e2;border-radius:12px;background:#fff;color:#4a90e2;transition:all .3s ease;text-align:left;white-space:normal;height:auto;min-height:60px;display:flex;align-items:center;justify-content:center}.btn-opcion[_ngcontent-%COMP%]:hover{background:#4a90e2;color:#fff;transform:translateY(-3px);box-shadow:0 6px 12px #4a90e233}.mensaje-resultado[_ngcontent-%COMP%]{padding:30px;border-radius:15px;margin-top:25px;text-align:center;animation:_ngcontent-%COMP%_fadeIn .5s ease;box-shadow:0 6px 12px #0000001a;background:#fff}.mensaje-resultado[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:20px;font-weight:700;color:#2c3e50}.mensaje-resultado[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.4rem;margin-bottom:25px;color:#666}.mensaje-resultado[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:15px 35px;font-size:1.2rem;border-radius:12px;transition:all .3s ease;font-weight:600;text-transform:uppercase;letter-spacing:1px}.mensaje-resultado[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 6px 12px #0003}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(-15px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.opciones-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.estadisticas[_ngcontent-%COMP%]{flex-direction:column;gap:15px}.estadistica-item[_ngcontent-%COMP%]{width:100%}.pregunta-texto[_ngcontent-%COMP%]{font-size:1.3rem}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}}@media (max-width: 480px){.imagen-container[_ngcontent-%COMP%]{height:200px}.pregunta-texto[_ngcontent-%COMP%]{font-size:1.1rem;padding:15px}.btn-opcion[_ngcontent-%COMP%]{padding:12px 15px;font-size:1rem}.card-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.estadistica-valor[_ngcontent-%COMP%]{font-size:1.6rem}}.preguntados-panel[_ngcontent-%COMP%]{margin-top:32px;margin-bottom:32px}"]})};export{$ as PreguntadosComponent};
