import{a as P}from"./chunk-X3LAWSPP.js";import{a as j,b as u,c as L,d as O,e as k,f as b,h as w,k as N,m as T,t as D}from"./chunk-C3KL25CK.js";import{a as M}from"./chunk-L5GLGSRE.js";import{e as I}from"./chunk-GLJWXLRS.js";import"./chunk-QTCHNE4Q.js";import"./chunk-HXP6K52P.js";import{l as F,p as S}from"./chunk-HW2YZ5O7.js";import{Ea as g,Ja as p,Ra as m,Ua as n,Va as i,W as _,Wa as d,X as E,Za as y,ab as f,bb as s,fb as c,hb as l,ua as a,za as h}from"./chunk-AOP3JIL5.js";import"./chunk-X5YLR3NI.js";import{i as C}from"./chunk-ODN5LVDJ.js";function G(o,t){if(o&1&&(n(0,"div",15),c(1),i()),o&2){let e=s();a(),l(" ",e.mensajeError," ")}}function U(o,t){if(o&1&&(n(0,"div",16),c(1),i()),o&2){let e=s();a(),l(" ",e.mensajeExito," ")}}function z(o,t){if(o&1&&(n(0,"div",15),c(1),i()),o&2){let e=s();a(),l(" ",e.getError("correoElectronico")," ")}}function A(o,t){if(o&1&&(n(0,"div",15),c(1),i()),o&2){let e=s();a(),l(" ",e.getError("clave")," ")}}function B(o,t){if(o&1){let e=y();n(0,"button",17),f("click",function(){_(e);let x=s();return E(x.reenviarConfirmacion())}),c(1),i()}if(o&2){let e=s();m("disabled",e.cargando),a(),l(" ",e.cargando?"Enviando...":"Reenviar correo de confirmaci\xF3n"," ")}}var v=class o{constructor(t){this.servicioUsuario=t}formulario;mensajeError="";mensajeExito="";cargando=!1;necesitaConfirmacion=!1;emailPendiente="";accesosRapidos=[{email:"tobias15esquivel@gmail.com",clave:"Clave123456"}];ngOnInit(){this.formulario=new k({correoElectronico:new b("",[u.required,u.email]),clave:new b("",[u.required,u.minLength(6)])})}onSubmit(){return C(this,null,function*(){if(this.formulario.valid){this.cargando=!0,this.mensajeError="",this.mensajeExito="",this.necesitaConfirmacion=!1;let{error:t}=yield this.servicioUsuario.iniciarSesion(this.getCorreoElectronico(),this.getClave());t&&(this.mensajeError=t.message,this.cargando=!1)}})}reenviarConfirmacion(){return C(this,null,function*(){if(this.emailPendiente){this.cargando=!0,this.mensajeError="",this.mensajeExito="";let{error:t,message:e}=yield this.servicioUsuario.reenviarConfirmacion(this.emailPendiente);t?this.mensajeError=t.message:(this.mensajeExito=e,this.necesitaConfirmacion=!1),this.cargando=!1}})}accesoRapido(t){this.formulario.patchValue({correoElectronico:t.email,clave:t.clave}),this.onSubmit()}getError(t){let e=this.formulario.get(t);if(e&&e.errors&&e.touched){if(e.errors.required)return"Este campo es requerido";if(e.errors.email)return"Ingrese un correo electr\xF3nico v\xE1lido";if(e.errors.minlength)return`M\xEDnimo ${e.errors.minlength.requiredLength} caracteres`}return""}getCorreoElectronico(){return this.formulario.get("correoElectronico")?.value}getClave(){return this.formulario.get("clave")?.value}static \u0275fac=function(e){return new(e||o)(h(M))};static \u0275cmp=g({type:o,selectors:[["app-login-form"]],decls:25,vars:8,consts:[[1,"form",3,"ngSubmit","formGroup"],[1,"titulo"],["class","error-mensaje",4,"ngIf"],["class","exito-mensaje",4,"ngIf"],[1,"seccion-input"],["for","correoElectronico"],["placeholder","Correo electr\xF3nico","formControlName","correoElectronico","type","email","name","correoElectronico","id","correoElectronico",1,"input-texto"],["for","clave"],["placeholder","Contrase\xF1a","formControlName","clave","type","password","name","clave","id","clave",1,"input-texto"],[1,"texto-cuenta"],["routerLink","/registro"],["type","submit",1,"btn-enviar",3,"disabled"],["type","button","class","btn-secundario",3,"disabled","click",4,"ngIf"],[1,"accesos-rapidos"],["type","button",1,"btn-acceso-rapido",3,"click"],[1,"error-mensaje"],[1,"exito-mensaje"],["type","button",1,"btn-secundario",3,"click","disabled"]],template:function(e,r){e&1&&(n(0,"form",0),f("ngSubmit",function(){return r.onSubmit()}),n(1,"h2",1),c(2,"Ingresa"),i(),p(3,G,2,1,"div",2)(4,U,2,1,"div",3),n(5,"div",4)(6,"label",5),c(7,"Correo electr\xF3nico"),i(),d(8,"input",6),p(9,z,2,1,"div",2),i(),n(10,"div",4)(11,"label",7),c(12,"Contrase\xF1a"),i(),d(13,"input",8),p(14,A,2,1,"div",2),i(),n(15,"p",9),c(16," \xBFNo ten\xE9s una cuenta? "),n(17,"a",10),c(18,"registrate"),i()(),n(19,"button",11),c(20),i(),p(21,B,2,2,"button",12),n(22,"div",13)(23,"button",14),f("click",function(){return r.accesoRapido(r.accesosRapidos[0])}),c(24," Acceso R\xE1pido "),i()()()),e&2&&(m("formGroup",r.formulario),a(3),m("ngIf",r.mensajeError),a(),m("ngIf",r.mensajeExito),a(5),m("ngIf",r.getError("correoElectronico")),a(5),m("ngIf",r.getError("clave")),a(5),m("disabled",r.formulario.invalid||r.cargando),a(),l(" ",r.cargando?"Ingresando...":"Ingresa"," "),a(),m("ngIf",r.necesitaConfirmacion))},dependencies:[D,w,j,L,O,N,T,I,S,F],styles:[".accesos-rapidos[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:8px;margin-top:10px}.btn-acceso-rapido[_ngcontent-%COMP%]{background:var(--color-primario);color:#fff;border:none;border-radius:6px;padding:6px 16px;font-size:1rem;font-weight:500;cursor:pointer;transition:background .2s}.btn-acceso-rapido[_ngcontent-%COMP%]:hover{background:var(--color-secundario)}",'.form[_ngcontent-%COMP%]{display:flex;padding:5%;flex-direction:column}.titulo[_ngcontent-%COMP%]{color:var(--color-primario);text-align:center;font-size:2.8rem}.titulo[_ngcontent-%COMP%]:after{border:1px solid var(--color-secundario);content:"";display:block;width:80%;margin:.2rem auto 2rem}.seccion-input[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.input-texto[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid rgba(0,0,0,.231);border-radius:6px}.input-texto.error[_ngcontent-%COMP%]{border-color:#f44336}.error-message[_ngcontent-%COMP%]{color:#f44336;font-size:.8rem;margin-top:.25rem}.error-mensaje[_ngcontent-%COMP%]{background-color:#ffebee;color:#f44336;padding:1rem;border-radius:6px;margin-bottom:1rem;text-align:center}.btn-enviar[_ngcontent-%COMP%]{border:none;font-size:inherit;color:var(--fondo);background-color:var(--color-primario);padding:.5rem;border-radius:10px}.btn-enviar[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.texto-cuenta[_ngcontent-%COMP%]{margin-bottom:1rem}label[_ngcontent-%COMP%]{display:none}']})};var R=class o{static \u0275fac=function(e){return new(e||o)};static \u0275cmp=g({type:o,selectors:[["app-login"]],decls:2,vars:0,consts:[["maxWidth","500px"]],template:function(e,r){e&1&&(n(0,"app-vista-form",0),d(1,"app-login-form"),i())},dependencies:[P,v],encapsulation:2})};export{R as LoginComponent};
